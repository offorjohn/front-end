import{r,n as T,y as C,j as e,B as S,T as R,x as v,h as m,W as w}from"./index-9ed829b0.js";import{a as k}from"./axios-6d17da38.js";import{C as O,T as E}from"./TablePagination-e1b76e9c.js";import{T as I,a as N,b as z,c as h,e as B,d as x,t as g}from"./TableRow-5157bfd5.js";import"./createContainer-610eb01d.js";import"./LastPage-7ab1ee93.js";import"./Select-90119a6b.js";const s=m(x)(({theme:a})=>({[`&.${g.head}`]:{backgroundColor:a.palette.common.grey,color:a.palette.common.grey},[`&.${g.body}`]:{fontSize:14,paddingLeft:a.spacing(1)}})),D=m(h)(({theme:a})=>({"&:nth-of-type(odd)":{backgroundColor:a.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}));function L(){const[a,i]=r.useState(0),[n,j]=r.useState(25),[f,u]=r.useState([]);r.useEffect(()=>{var d;let t=T("token").split(":")[0];C(localStorage.getItem("loginResponse"))&&(t=(d=JSON.parse(localStorage.getItem("loginResponse")))==null?void 0:d.token),(async()=>{try{const c={method:"GET",url:"https://otpninja.com/api/v1/listpayments",headers:{"X-OTPNINJA-TOKEN":t}},p=await k.request(c);p.data.data&&u(p.data.data)}catch{}})()},[]);const l=f.map(t=>({id:t.reference,amount:t.amount,description:t.description,date:new Date(t.paymentdate),paymentmessage:t.paymentmessage})).sort((t,o)=>o.date-t.date),P=(t,o)=>{i(o)},y=t=>{j(parseInt(t.target.value,10)),i(0)},b=l.slice(a*n,a*n+n);return e.jsx(O,{children:e.jsxs(S,{sx:{mt:8},children:[e.jsx(R,{variant:"h4",sx:{position:"relative",top:"-50px",order:-3,mt:-2,fontWeight:"bold",fontSize:"2rem"},children:"Order History"}),e.jsxs(I,{component:v,children:[e.jsxs(N,{sx:{minWidth:700},"aria-label":"customized table",children:[e.jsx(z,{children:e.jsxs(h,{children:[e.jsx(s,{children:"Description"}),e.jsx(s,{align:"left",children:"Status"}),e.jsx(s,{align:"left",children:"Date"})]})}),e.jsx(B,{children:b.map(t=>e.jsxs(D,{children:[e.jsx(s,{component:"th",scope:"row",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:t.description}})}),e.jsx(x,{sx:{color:"black",paddingLeft:-1},children:t.paymentmessage?t.paymentmessage:"Pending"}),e.jsx(s,{align:"left",children:t.date.toLocaleDateString()})]},t.id))})]}),e.jsx(E,{component:"div",count:l.length,page:a,onPageChange:P,rowsPerPage:n,onRowsPerPageChange:y,rowsPerPageOptions:[5,10,25]})]})]})})}function F(){return e.jsxs(e.Fragment,{children:[e.jsx(w,{children:e.jsx("title",{children:" Order Page "})}),e.jsx(L,{})]})}export{F as default};
