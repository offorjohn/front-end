import{aj as y,r as t,j as e,B as c,D as T,T as g,x as w,W as D}from"./index-2e54d78d.js";import{a as E}from"./axios-6d17da38.js";import{T as N,a as R,b as O,c as j,d as r,e as P}from"./TableRow-ebccd0d1.js";const B=()=>{const u=y(),o=new URLSearchParams(u.search).get("number"),[d,m]=t.useState([]),[b,f]=t.useState(!0),[x,S]=t.useState(null);t.useEffect(()=>{o&&(async()=>{var n;const i=`https://otpninja.com/api/v1/listmessagesbynumber?type=mdn&number=${o}`,l=(n=JSON.parse(localStorage.getItem("loginResponse")))==null?void 0:n.token;try{const a=await E.get(i,{headers:{"X-OTPNINJA-TOKEN":l}});m(a.data.data)}catch(a){S(a.message)}finally{f(!1)}})()},[o]);const h=[],p=new Set;return d.forEach(s=>{!p.has(s.sender)&&!s.message.toLowerCase().includes("billing")&&(p.add(s.sender),h.push(s))}),e.jsx(c,{sx:{flexGrow:1,p:3},children:b?e.jsx(T,{}):x?e.jsxs(g,{color:"error",children:["Error: ",x]}):e.jsxs(e.Fragment,{children:[d.length>0&&e.jsx(c,{sx:{display:"flex",justifyContent:"center",gap:"10px",marginBottom:"40px",flexDirection:{xs:"column",sm:"row"}},children:e.jsx(c,{sx:{border:"3px solid #ccc",padding:"20px",borderRadius:"8px",width:{xs:"100%",sm:"30%"},maxWidth:"400px",display:"inline-block"},children:e.jsx(c,{sx:{border:"2px solid #ccc",padding:"5px",borderRadius:"8px",textAlign:"center"},children:e.jsxs(g,{variant:"h6",gutterBottom:!0,children:["✉ © ",d[0].number]})})})}),e.jsx(N,{component:w,children:e.jsxs(R,{"aria-label":"messages table",children:[e.jsx(O,{children:e.jsxs(j,{children:[e.jsx(r,{children:e.jsx("strong",{children:"Sender"})}),e.jsx(r,{children:e.jsx("strong",{children:"Message"})}),e.jsx(r,{children:e.jsx("strong",{children:"Date"})})]})}),e.jsx(P,{children:h.map((s,i)=>e.jsxs(j,{children:[e.jsx(r,{children:s.sender}),e.jsx(r,{children:s.message.includes("sender")?(()=>{const l=JSON.parse(s.message.replace(/'/g,'"')),{sender:n,receiver:a}=l;return`Sender: ${n}, Receiver: ${a}`})():s.message}),e.jsx(r,{children:new Date(s.messagedate).toLocaleString()})," "]},i))})]})})]})})},C=B;function k(){return e.jsxs(e.Fragment,{children:[e.jsx(D,{children:e.jsx("title",{children:" Otp Ninja "})}),e.jsx(C,{})]})}export{k as default};
